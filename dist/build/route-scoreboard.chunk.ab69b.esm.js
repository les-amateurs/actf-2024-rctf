(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"FrX+":function(e,t,n){"use strict";function r(e){return Object(o.h)(s.a,{...e,glyph:"clock",viewBox:"0 0 24 24"})}n.d(t,"a",(function(){return r}));var o=n("sL3o"),a=n("ziER"),i=n.n(a),l=n("5JeM"),c=n.n(l),s=n("VXtC");const u=new i.a({id:"clock",use:"clock-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#ffffff" id="clock"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" /><path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z" /></symbol>'});c.a.add(u)},JXlG:function(e,t,n){"use strict";(function(e){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=n("sL3o"),s=n("+mXV"),u=n("C+Gs"),d=n("obyI"),p=n("Xjb4");const b=({minX:e,maxX:t,time:n,width:r})=>(n-e)/(t-e)*r,f=e=>{const t=parseInt(e.slice(-12),16)+1;return`rgba(186, ${89*t%128}, ${53*t%128}, 0.8)`},g=Object(p.b)(t=>{let{points:n,onTooltipIn:r,onMouseMove:o,onMouseOut:a,name:s,currentScore:u}=t,d=l(t,["points","onTooltipIn","onMouseMove","onMouseOut","name","currentScore"]);return e(c.Fragment,null,e("polyline",i({},d,{points:n,"stroke-width":2,"stroke-linecap":"round",fill:"transparent","pointer-events":"none"})),e("polyline",{"stroke-width":12,points:n,"stroke-linecap":"round",fill:"transparent","pointer-events":"stroke",onMouseOver:r(`${s} - ${u} points`),onMouseMove:o,onMouseOut:a}))});t.a=Object(u.a)({root:{marginBottom:"20px",background:"#222","& .frame__body":{padding:"20px"}},tooltip:{position:"fixed",pointerEvents:"none",background:"#fff",color:"#222",padding:"5px 10px",borderRadius:"5px",margin:"5px",top:"0",left:"0"}},(function({graphData:t,classes:n}){const r=Object(s.i)(null),[a,i]=Object(s.j)(window.innerWidth),l=Object(s.a)(()=>{null!==r.current&&i(r.current.getBoundingClientRect().width)},[]),[u,p]=Object(s.j)({x:0,y:0,content:""});Object(s.f)(()=>{l()},[l]),Object(s.d)(()=>{function e(){l()}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[l]);const{polylines:m,labels:O}=Object(s.g)(()=>{if(!t||0===t.length)return{polylines:[],labels:[]};const e=d.a.startTime,n=Math.min(Date.now(),d.a.endTime);let r=0;t.graph.forEach(e=>{e.points.forEach(e=>{e.score>r&&(r=e.score)})});const o=(({minX:e,maxX:t,width:n})=>{const r=[],o=864e5*Math.ceil((t-e)/n*200/864e5);let a=new Date(e).setHours(0,0,0,0);a%o!=0&&(a+=o);for(let i=a;i<=t;i+=o)r.push({label:new Date(i).toLocaleDateString(),x:b({minX:e,maxX:t,time:i,width:n})});return r})({minX:e,maxX:n,width:a});return{polylines:t.graph.map(t=>(({id:e,name:t,currentScore:n,points:r,maxX:o,minX:a,maxY:i,width:l})=>{const c=r.map(e=>`${b({minX:a,maxX:o,time:e.time,width:l})} ${400*(1-e.score/i)}`);return{color:f(e),name:t,currentScore:n,points:c.join(",")}})({points:t.points,id:t.id,name:t.name,currentScore:t.points[0].score,maxX:n,minX:e,maxY:r,width:a})),labels:o}},[t,a]),v=Object(s.a)(e=>()=>{p(t=>o(o({},t),{},{content:e}))},[]),y=Object(s.a)(e=>{p(t=>o(o({},t),{},{x:e.clientX,y:e.clientY}))},[]),j=Object(s.a)(()=>{p(e=>o(o({},e),{},{content:""}))},[]);return null===t?null:e("div",{class:"frame "+n.root},e("div",{class:"frame__body"},e("svg",{ref:r,viewBox:`-22 -2 ${a+4+20} 444`},e(c.Fragment,null,m.map(({points:t,color:n,name:r,currentScore:o},a)=>e(g,{key:a,stroke:n,points:t,name:r,currentScore:o,onMouseMove:y,onMouseOut:j,onTooltipIn:v}))),e(c.Fragment,null,O.map((t,n)=>e("text",{x:t.x,y:440,key:n,fill:"#fff"},t.label))),e("line",{x1:-20,y1:420,x2:a,y2:420,stroke:"var(--cirrus-bg)","stroke-linecap":"round","stroke-width":2}),e("line",{x1:-20,y1:"0",x2:-20,y2:420,stroke:"var(--cirrus-bg)","stroke-linecap":"round","stroke-width":2}))),u.content&&e("div",{class:n.tooltip,style:{transform:`translate(${u.x}px, ${u.y}px)`}},u.content))}))}).call(this,n("sL3o").h)},VXtC:function(e,t,n){"use strict";(function(e){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(t){let{glyph:n,viewBox:a}=t,i=o(t,["glyph","viewBox"]);return e("svg",r({},i,{viewBox:a,xmlns:"http://www.w3.org/2000/svg"}),e("use",{xlinkHref:"#"+n}))}n.d(t,"a",(function(){return a}))}).call(this,n("sL3o").h)},WX8x:function(e,t,n){"use strict";(function(e){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(t){let{onClick:n,disabled:a,selected:l,children:c,tabindex:s}=t,u=o(t,["onClick","disabled","selected","children","tabindex"]);const d=u.class||"";delete u.class;const p=Object(i.a)(e=>{e.preventDefault(),n()},[n]);return e("div",r({class:`pagination-item short ${d}${l?" selected":""}`},u),e("a",{disabled:a,href:n&&"#",onClick:p,tabindex:s},c))}var i=n("+mXV"),l=n("sL3o"),c=n("C+Gs");const s=Object(c.a)({noHover:{backgroundColor:"transparent !important"},ellipses:{paddingLeft:"0.1em !important",paddingRight:"0.1em !important"}},({classes:t})=>{const n=Object(i.a)(e=>e.target.blur(),[]);return e("div",{class:"pagination-item short "+t.noHover},e("a",{class:"ellipses "+t.ellipses,tabindex:"-1",onFocus:n},"â€¦"))});t.a=function({totalItems:t,pageSize:n,page:r,setPage:o,numVisiblePages:c}){c=c||9;const u=Math.ceil(t/n),{pages:d,startPage:p,endPage:b}=Object(i.g)(()=>{let e,t;u<=c?(e=1,t=u):(e=r-Math.ceil((c-1)/2),t=r+Math.floor((c-1)/2),e<1?(e=1,t=c):t>u&&(t=u,e=u-c+1),e>1&&(e+=2),t<u&&(t-=2));const n=[];for(let r=e;r<=t;r++)n.push(r);return{pages:n,startPage:e,endPage:t}},[u,r,c]),f=Object(i.g)(()=>{const e=[];for(let t=1;t<=u;t++)e.push(()=>o(t));return e},[o,u]);return e("div",{class:"pagination u-center"},e(a,{disabled:1===r,key:"<",onClick:f[r-1-1]},"<"),p>1&&e(l.Fragment,null,e(a,{key:1,onClick:f[0]},"1"),e(s,{key:".<"})),d.map(t=>e(a,{selected:t===r,key:t,onClick:f[t-1]},t)),b<u&&e(l.Fragment,null,e(s,{key:".>"}),e(a,{key:u,onClick:f[u-1]},u)),e(a,{disabled:r===u,key:">",onClick:f[r+1-1]},">"))}}).call(this,n("sL3o").h)},"YM+X":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var r=n("vgrf");const o=({division:e,limit:t=100,offset:n=0})=>Object(r.b)("GET","/leaderboard/now",{division:e,limit:t,offset:n}),a=async({division:e})=>Object(r.b)("GET","/leaderboard/graph",{division:e,limit:10})},pEbl:function(e,t,n){"use strict";(function(e){var r=n("C+Gs"),o=n("FrX+"),a=n("obyI");const i=Object(r.a)({card:{background:"#222",padding:"30px !important",flexDirection:"column"},icon:{width:"60px"}},({classes:t})=>e("div",{class:"row"},e("div",{class:"card u-center col-6 "+t.card},e("div",{class:t.icon},e(o.a,null)),e("h4",null,a.a.ctfName," has not started yet."))));t.a=i}).call(this,n("sL3o").h)},uRlC:function(e,t,n){"use strict";n.r(t),function(e){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n("+mXV"),c=n("obyI"),s=n("C+Gs"),u=n("WX8x"),d=n("JXlG"),p=n("pEbl"),b=n("ucLl"),f=n("YM+X"),g=n("O1lG"),m=n("ykor");const O=[25,50,100],v=0,y=1,j=2,h=Object(s.a)({frame:{paddingBottom:"1.5em",paddingTop:"2.125em",background:"#222","& .frame__subtitle":{color:"#fff"},"& button, & select, & option":{background:"#111",color:"#fff"}},tableFrame:{paddingTop:"1.5em"},selected:{backgroundColor:"rgba(216,216,216,.07)","&:hover":{backgroundColor:"rgba(216,216,216,.20) !important"}},table:{tableLayout:"fixed","& tbody td":{overflow:"hidden",whiteSpace:"nowrap"}},row:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 1.5rem",borderBottom:"1px solid rgba(219,219,219,.5)"},rankAndName:{display:"flex",alignItems:"center",gap:"1rem"},tableHeader:{fontWeight:"bold",borderWidth:"2px",padding:"0.25rem 1.5rem",borderTop:"1px solid rgba(219,219,219,.5)"},background:{height:"2.5rem",maskImage:"linear-gradient(to right, #0000, #fff, #fff, #fff, #0000)",flexGrow:1,backgroundSize:"cover",backgroundPosition:"center"}},({classes:t})=>{const n=Object(l.g)(()=>null!==localStorage.getItem("token"),[]),o=Object(l.g)(()=>{const e=JSON.parse(localStorage.getItem("scoreboardPageState")||"{}"),t=new URLSearchParams(location.search),n={};if(t.has("page")){const e=parseInt(t.get("page"));isNaN(e)||(n.page=e)}if(t.has("pageSize")){const e=parseInt(t.get("pageSize"));isNaN(e)||(n.pageSize=e)}return t.has("division")&&(n.division=t.get("division")),a(a({},e),n)},[]),[i,s]=Object(l.j)(null),[h,w]=Object(l.j)(o.pageSize||100),[k,x]=Object(l.j)([]),[P,S]=Object(l.j)(null),[X,C]=Object(l.j)(o.division||"all"),[M,I]=Object(l.j)(o.page||1),[$,E]=Object(l.j)(0),[L,z]=Object(l.j)(v),[D,F]=Object(l.j)(v),N=Object(l.i)(),{toast:_}=Object(b.b)(),T=Object(l.a)(e=>{C(e),I(1)},[C,I]),B=Object(l.a)(e=>{w(e),I(Math.floor((M-1)*h/e)+1)},[h,w,M,I]);Object(l.d)(()=>{localStorage.setItem("scoreboardPageState",JSON.stringify({pageSize:h,division:X}))},[h,X]),Object(l.d)(()=>{1===M&&""===location.search||history.replaceState({},"",`?page=${M}&division=${encodeURIComponent(X)}&pageSize=${h}`)},[h,X,M]);const G=Object(l.a)(e=>T(e.target.value),[T]),V=Object(l.a)(e=>B(e.target.value),[B]);Object(l.d)(()=>{document.title="Scoreboard | "+c.a.ctfName},[]),Object(l.d)(()=>{n&&Object(g.c)().then(({data:e,error:t})=>{t&&_({body:t,type:"error"}),s(e)})},[n,_]),Object(l.d)(()=>{(async()=>{const e="all"===X?void 0:X,{kind:t,data:n}=await Object(f.b)({division:e,offset:(M-1)*h,limit:h});z("badNotStarted"===t?y:j),"goodLeaderboard"===t&&(x(n.leaderboard.map((e,t)=>a(a({},e),{},{rank:t+1+(M-1)*h}))),n.leaderboard.forEach(e=>{var t;console.log(e);const n=null==(t=e.items)?void 0:t.font;n&&Object(m.a)(n.id,n.resourceUrl)}),E(n.total))})()},[X,M,h]),Object(l.d)(()=>{(async()=>{const e="all"===X?void 0:X,{kind:t,data:n}=await Object(f.a)({division:e});F("badNotStarted"===t?y:j),"goodLeaderboard"===t&&S(n)})()},[X]);const H=n&&null!==i&&null!==i.globalPlace&&("all"===X||Number.parseInt(X)===i.division),J=Object(l.g)(()=>{if(null==i)return!1;let e=!1;return k.forEach(({id:t})=>{t===i.id&&(e=!0)}),e},[i,k]),R=Object(l.a)(()=>{N.current.scrollIntoView({block:"nearest",behavior:"smooth"})},[N]),[W,Y]=Object(l.j)(!1),A=Object(l.a)(()=>{if(!H)return;let e;e="all"===X?i.globalPlace:i.divisionPlace,I(Math.floor((e-1)/h)+1),J?R():Y(!0)},[i,I,h,X,H,J,R]);return Object(l.d)(()=>{W&&J&&(R(),Y(!1))},[J,W,R]),L===v||D===v?null:L===y||D===y?e(p.a,null):e("div",{class:"row u-center",style:"align-items: initial !important"},e("div",{class:"col-12 u-center"},e("div",{class:"col-8"},e(d.a,{graphData:P}))),e("div",{class:"col-3"},e("div",{class:"frame "+t.frame},e("div",{class:"frame__body"},e("div",{class:"frame__subtitle"},"Filter by division"),e("div",{class:"input-control"},e("select",{required:!0,class:"select",name:"division",value:X,onChange:G},e("option",{value:"all",selected:!0},"All"),Object.entries(c.a.divisions).map(([t,n])=>e("option",{key:t,value:t},n)))),e("div",{class:"frame__subtitle"},"Teams per page"),e("div",{class:"input-control"},e("select",{required:!0,class:"select",name:"pagesize",value:h,onChange:V},O.map(t=>e("option",{value:t},t)))),n&&e("div",{class:"btn-container u-center"},e("button",{disabled:!H,onClick:A},"Go to my team"))))),e("div",{class:"col-6"},e("div",{class:`frame ${t.frame} ${t.tableFrame}`},e("div",{class:"frame__body"},e("div",{class:`${t.row} ${t.tableHeader}`},e("span",{class:t.rankAndName},e("span",null,"#"),e("span",null,"Team")),e("span",null,"Points")),k.map(({id:n,name:r,score:o,rank:a,items:l})=>{var c;const s=null!=i&&i.id===n;return e("div",{key:n,class:`${t.row} ${s?t.selected:""}`,ref:s?N:null},e("span",{class:t.rankAndName},a,e("a",{href:"/profile/"+n,style:{fontFamily:(null==l||null==(c=l.font)?void 0:c.id)?"font-"+l.font.id:null}},r)),e("div",{class:t.background,style:{backgroundImage:(null==l?void 0:l.background)&&`url(${l.background.resourceUrl})`,height:1===a?"7rem":2===a?"4rem":null}}),e("span",null,o))})),$>h&&e(u.a,r({totalItems:$,pageSize:h,page:M,setPage:I},{numVisiblePages:9})))))});t.default=h}.call(this,n("sL3o").h)},ykor:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=async(e,t)=>{let n=!1,r=document.fonts.values(),o=null;for(;!(o=r.next()).done;)o.value.family==="font-"+e&&(n=!0);if(!n){console.log("Loading font "+t);const n=new FontFace("font-"+e,`url(${t})`);document.fonts.add(await n.load())}}}}]);